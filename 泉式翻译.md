学习node.js 你会赢

LEARN YOU THE NODE.JS FOR MUCH WIN!

HTTP UPPERCASERER (Exercise 12 of 13)

编写一个仅接受POST请求的HTTP服务器，并将传入POST的正文字符转换为大写，并且将它返回给客户端

Write an HTTP server that receives only POST requests and converts incoming POST body characters to upper-case and returns it to the client.

你的服务器应该监听程序第一个参数提供的端口

Your server should listen on the port provided by the first argument to  your program.

HINTS 

这里将不限制你使用 stream 处理 request 和 response  

While you're not restricted to using the streaming capabilities of the 

request and response objects, it will be much easier if you do.

在npm中有许多不同的包，你可以用来转换流数据，对于本次练习，through 2-map 提供了最简单的API

There are a number of different packages in npm that you can use to "transform" stream data as it's passing through. For this exercise the   through2-map package offers the simplest API. 

through 2-map 允许仅使用一个变换流来创建变换流函数，并返回数据，它的设计工作很像Array#map()，但是应用于流

through2-map allows you to create a transform stream using only a single 

  function that takes a chunk of data and returns a chunk of data. It's 

  designed to work much like Array#map() but for streams:



​                  var map = require('through2-map') 

​               inStream.pipe(map(function (chunk) { 

​               return chunk.toString().split('').reverse().join('') 

​               })).pipe(outStream) 

在上面的例子中，来自instream的输入数据被转换为子符串（如果尚被转换），字符反转，并将结果传递给了outstream，因此我们创造了一个巨大的字符反转器！请记住，chunk（类似于数据库中的分区的概念）的大小是由up-stream决定的，并且你对于输入的数据只需要很小的控制

In the above example, the incoming data from inStream is converted to a  

  String (if it isn't already), the characters are reversed and the result  

  is passed through to outStream. So we've made a chunk character reverser!  

  Remember though that the chunk size is determined up-stream and you have  little control over it for incoming data.  



through2-map类型安装，请执行以下操作

To install through2-map type: 

​       $ npm install through2-map

如果没有连接网络，只需要创建node-modules目录并复制到learnynode 到使用的模块整个目录

If you don't have an Internet connection, simply make a node_modules  

  directory and copy the entire directory for the module you want to use  

  from inside the learnyounode installation directory: 



file:///Users/dllo/.nvm/versions/node/v8.9.4/lib/node_modules/learnyounode   /node_modules/through2-map

through2-map 文档已经与learnyounode一起安装在你的系统，你可以通过指向你的浏览器来阅读它们

Documentation for through2-map has been installed along with learnyounode  on your system and you can read them by pointing your browser here: 

 file:///Users/dllo/.nvm/versions/node/v8.9.4/lib/node_modules/learnyounode   /docs/through2-map.html 



要再次打印这些说明，请运行：learnyounode print

To print these instructions again, run: learnyounode print

要在测试环境中执行程序，请运行：learnyounode run program.js

*To execute your program in a test environment, run: learnyounode run*

要验证您的程序，请运行：learnyounode verify program.js

To verify your program, run: learnyounode verify program.js

需要帮助，运行：learnyounode help

For help run: learnyounode help

#### 

